sudo: true
language: python

matrix:
  include:
    - os: linux
      python: "3.6"
      sudo: required
      env:
        - TARGET="lint"
      before_script:
        - pip3 install ufolint
        - sudo apt-get -qq update
        - sudo apt-get install -y shellcheck
      script:
        - make -j $TARGET
    - os: linux
      python: "3.6"
      sudo: required
      env:
        - TARGET="build-with-dependencies"
      before_script:
        - pip3 install ufolint
        - sudo apt-get -qq update
        - sudo apt-get install -y shellcheck
      script:
        - make -j $TARGET
    - os: osx
      env:
        - TARGET="lint"
      before_install:
        - brew update
        - brew install python3
        - virtualenv env -p python3
        - source env/bin/activate
      before_script:
        - pip install ufolint
        - brew install shellcheck
      script:
        - make -j $TARGET
    - os: osx
      env:
        - TARGET="build-with-dependencies"
      before_install:
        - brew update
        - brew install python3
        - virtualenv env -p python3
        - source env/bin/activate
      script:
        - make -j $TARGET

notifications:
  email: false
